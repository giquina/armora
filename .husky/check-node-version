#!/bin/bash
# Node version check hook for Armora
# Ensures developers are using Node 20+ as required by Firebase 12 and React 19

NODE_VERSION=$(node --version)
MAJOR_VERSION=$(echo $NODE_VERSION | cut -d'.' -f1 | sed 's/v//')

if [ "$MAJOR_VERSION" -lt 20 ]; then
    echo ""
    echo "⚠️  WARNING: Node version check failed"
    echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
    echo "Current Node version: $NODE_VERSION"
    echo "Required Node version: 20.x or higher"
    echo ""
    echo "This project requires Node 20+ because:"
    echo "  • Firebase 12.3.0 requires Node 20+"
    echo "  • React 19.1.1 is optimized for Node 20+"
    echo "  • TypeScript build performance benefits"
    echo ""
    echo "To fix this issue:"
    echo "  nvm install 20"
    echo "  nvm use 20"
    echo ""
    echo "Or set as default:"
    echo "  nvm alias default 20"
    echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
    echo ""
    exit 1
fi

echo "✅ Node version check passed: $NODE_VERSION"
exit 0
